# Лабораторная работа 1

**Название:** "Разработка драйверов символьных устройств"

**Цель работы:** получить знания и навыки разработки драйверов символьных устройств для операционной системы Linux.


## Описание функциональности драйвера

При записи в файл символьного устройства текста типа “5+6” должен запоминаться результат операции, то есть 11 для данного примера. Должны поддерживаться операции сложения, вычитания, умножения и деления. Последовательность полученных результатов с момента загрузки модуля ядра должна выводиться при чтении созданного файла /proc/varN в консоль пользователя.
При чтении из файла символьного устройства в кольцевой буфер ядра должен осуществляться вывод тех же данных, которые выводятся при чтении файла /proc/varN.

## Инструкция по сборке
Makefile:  
obj-m += lab.o  

all:  
	make -C /lib/modules/`uname -r`/build M=$(PWD) modules  
clean:  
	make -C /lib/modules/`uname -r`/build M=$(PWD) clean

## Инструкция пользователя

1) Выдать пользователю право на запись в файл устройства, расположенный по адресу /dev/var2
2) С помощью команды echo или аналогов отправить данные в файл устройства.
3) Используя файл устройства или файл процесса (/proc/var2) получить результат в кольцевом буфере вывода ядра или же на выводе пользователя.

## Примеры использования

dima@dima-VirtualBox:\~/io-systems/lab$ echo "5+6" > /dev/var2  
dima@dima-VirtualBox:\~/io-systems/lab$ dmesg | tail -n1 
[ 3315.738148] device_write(00000000b1778064)  
dima@dima-VirtualBox:\~/io-systems/lab$ cat /proc/var2  
11  
dima@dima-VirtualBox:\~/io-systems/lab$ dmesg | tail -n1  
[ 3315.738148] device_write(00000000b1778064)  
dima@dima-VirtualBox:\~/io-systems/lab$ cat /dev/var2  
dima@dima-VirtualBox:\~/io-systems/lab$ dmesg | tail -n1
[ 3354.019494] last result 11  


